# H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng Skeleton Loader ·ªû Nhi·ªÅu Trang

## ‚úÖ Skeleton Loader ƒê√£ S·∫µn S√†ng T√°i S·ª≠ D·ª•ng!

Component [ProductItemSkeleton](file:///d:/Work/Project_Web/E-commerse-reactjs/ecommerse/src/components/skeletons/ProductItemSkeleton/ProductItemSkeleton.jsx#5-63) gi·ªù c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ·ªü b·∫•t k·ª≥ ƒë√¢u trong ·ª©ng d·ª•ng c·ªßa b·∫°n.

---

## üì∏ K·∫øt Qu·∫£ Tr√™n Homepage

````carousel
![Homepage v·ªõi skeleton loaders](C:/Users/User Name/.gemini/antigravity/brain/8c26f7e1-a408-4f42-ac62-af182181edb1/homepage_skeleton_loading_1764920566114.png)

<!-- slide -->

![Homepage sau khi load xong](C:/Users/User Name/.gemini/antigravity/brain/8c26f7e1-a408-4f42-ac62-af182181edb1/homepage_products_loaded_1764920580980.png)

<!-- slide -->

![Video recording homepage](C:/Users/User Name/.gemini/antigravity/brain/8c26f7e1-a408-4f42-ac62-af182181edb1/homepage_skeleton_test_1764920553235.webp)
````

---

## üéØ C√°ch T√≠ch H·ª£p Skeleton V√†o Component M·ªõi

### **B∆∞·ªõc 1: Import ProductItemSkeleton**

```jsx
import ProductItemSkeleton from '@components/skeletons/ProductItemSkeleton/ProductItemSkeleton';
```

### **B∆∞·ªõc 2: Th√™m Loading State**

```jsx
const [isLoading, setIsLoading] = useState(true);
```

### **B∆∞·ªõc 3: Hi·ªÉn Th·ªã Skeleton Khi Loading**

```jsx
{isLoading ? (
  // Skeleton loaders
  <>
    {Array.from({ length: 8 }).map((_, index) => (
      <ProductItemSkeleton 
        key={index} 
        isShowGrid={true} 
        isHomePage={true} 
      />
    ))}
  </>
) : (
  // Actual products
  data.map((item) => (
    <ProductItem key={item._id} {...item} />
  ))
)}
```

---

## üìã Props c·ªßa ProductItemSkeleton

| Prop | Type | Default | M√¥ t·∫£ |
|------|------|---------|-------|
| `isShowGrid` | boolean | `true` | `true` = Grid view (300px), `false` = List view (430px) |
| `isHomePage` | boolean | `true` | `true` = Kh√¥ng hi·ªán size/button, `false` = Hi·ªán ƒë·∫ßy ƒë·ªß |

### **Khi N√†o D√πng Props G√¨?**

#### **Homepage / Grid View**
```jsx
<ProductItemSkeleton 
  isShowGrid={true} 
  isHomePage={true} 
/>
```
- Hi·ªÉn th·ªã: Image + Title + Price
- Kh√¥ng c√≥: Size buttons, Add to cart button, Brand

#### **Shop Page / Grid View**
```jsx
<ProductItemSkeleton 
  isShowGrid={true} 
  isHomePage={false} 
/>
```
- Hi·ªÉn th·ªã: Image + Title + Brand + Price + Button
- Kh√¥ng c√≥: Size buttons (ch·ªâ c√≥ ·ªü list view)

#### **Shop Page / List View**
```jsx
<ProductItemSkeleton 
  isShowGrid={false} 
  isHomePage={false} 
/>
```
- Hi·ªÉn th·ªã: Image + Size buttons + Title + Brand + Price + Button
- Layout horizontal (430px image width)

---

## üí° V√≠ D·ª• Th·ª±c T·∫ø

### **1. HeadingListProduct Component**

[HeadingListProduct.jsx](file:///d:/Work/Project_Web/E-commerse-reactjs/ecommerse/src/components/HeadingListProduct/HeadingListProduct.jsx)

```jsx
function HeadingListProduct({ data, isLoading = false }) {
  return (
    <MainLayout>
      <div className={container}>
        <CountDownBanner />
        <div className={containerItem}>
          {isLoading ? (
            // 2 skeleton loaders
            <>
              <ProductItemSkeleton isShowGrid={true} isHomePage={true} />
              <ProductItemSkeleton isShowGrid={true} isHomePage={true} />
            </>
          ) : (
            // Actual products
            data.map((item) => <ProductItem key={item._id} {...item} />)
          )}
        </div>
      </div>
    </MainLayout>
  );
}
```

**ƒê·∫∑c ƒëi·ªÉm:**
- ‚úÖ Hi·ªÉn th·ªã 2 skeleton (v√¨ ch·ªâ c√≥ 2 s·∫£n ph·∫©m)
- ‚úÖ Grid view, homepage style
- ‚úÖ ƒê∆°n gi·∫£n, g·ªçn g√†ng

---

### **2. PopularProduct Component**

[PopularProduct.jsx](file:///d:/Work/Project_Web/E-commerse-reactjs/ecommerse/src/components/PopularProduct/PopularProduct.jsx)

```jsx
function PopularProduct({ data, isLoading = false }) {
  return (
    <MainLayout>
      <div className={container}>
        {isLoading ? (
          // 8 skeleton loaders
          <>
            {Array.from({ length: 8 }).map((_, index) => (
              <ProductItemSkeleton 
                key={index} 
                isShowGrid={true} 
                isHomePage={true} 
              />
            ))}
          </>
        ) : (
          // Actual products
          data.map((item) => <ProductItem key={item._id} {...item} />)
        )}
      </div>
    </MainLayout>
  );
}
```

**ƒê·∫∑c ƒëi·ªÉm:**
- ‚úÖ Hi·ªÉn th·ªã 8 skeleton (s·ªë l∆∞·ª£ng s·∫£n ph·∫©m ph·ªï bi·∫øn)
- ‚úÖ S·ª≠ d·ª•ng `Array.from()` ƒë·ªÉ t·∫°o nhi·ªÅu skeleton
- ‚úÖ Grid view, homepage style

---

### **3. ListProducts Component (Shop Page)**

[ListProducts.jsx](file:///d:/Work/Project_Web/E-commerse-reactjs/ecommerse/src/pages/OurShop/components/ListProducts.jsx)

```jsx
function ListProducts() {
  const { isShowGrid, isLoading, showId } = useContext(OurShopContext);
  
  const getSkeletonCount = () => {
    if (showId === 'all') return 8;
    return parseInt(showId) || 8;
  };

  return (
    <div className={sectionListProduct}>
      <MainLayout>
        {isLoading ? (
          <div className={isShowGrid ? containerProduct : ''}>
            {Array.from({ length: getSkeletonCount() }).map((_, index) => (
              <ProductItemSkeleton 
                key={index} 
                isShowGrid={isShowGrid}
                isHomePage={false}
              />
            ))}
          </div>
        ) : (
          // Actual products
          <div className={isShowGrid ? containerProduct : ''}>
            {products.map((item) => <ProductItem key={item._id} {...item} />)}
          </div>
        )}
      </MainLayout>
    </div>
  );
}
```

**ƒê·∫∑c ƒëi·ªÉm:**
- ‚úÖ Skeleton count ƒë·ªông d·ª±a tr√™n `showId` (8, 12, ho·∫∑c all)
- ‚úÖ H·ªó tr·ª£ c·∫£ grid v√† list view (`isShowGrid`)
- ‚úÖ Shop page style (`isHomePage={false}`)
- ‚úÖ Hi·ªÉn th·ªã size buttons v√† add to cart button

---

### **4. HomePage Component**

[HomePage.jsx](file:///d:/Work/Project_Web/E-commerse-reactjs/ecommerse/src/components/HomePage/HomePage.jsx)

```jsx
function HomePage() {
  const [listProducts, setListProducts] = useState([]);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    const query = { sortType: 0, page: 1, limit: 10 };
    setIsLoading(true);
    getProducts(query)
      .then((res) => {
        setListProducts(res.contents);
        setIsLoading(false);
      })
      .catch((err) => {
        console.error('Failed to load products:', err);
        setIsLoading(false);
      });
  }, []);

  return (
    <>
      <MyHeader />
      <Banner />
      <Infor />
      <AdvancelHeadling />
      
      <HeadingListProduct 
        data={listProducts.slice(0, 2)} 
        isLoading={isLoading}
      />
      
      <PopularProduct 
        data={listProducts.slice(2, listProducts.length)}
        isLoading={isLoading}
      />
      
      <SaleHomePage />
      <MyFooter />
    </>
  );
}
```

**ƒê·∫∑c ƒëi·ªÉm:**
- ‚úÖ Qu·∫£n l√Ω loading state t·∫≠p trung
- ‚úÖ Truy·ªÅn `isLoading` xu·ªëng c√°c child components
- ‚úÖ Error handling v·ªõi catch
- ‚úÖ Set loading v·ªÅ false trong c·∫£ then v√† catch

---

## üîß Best Practices

### **1. S·ªë L∆∞·ª£ng Skeleton**
- Hi·ªÉn th·ªã s·ªë l∆∞·ª£ng skeleton **g·∫ßn b·∫±ng** s·ªë s·∫£n ph·∫©m th·ª±c t·∫ø
- V√≠ d·ª•: N·∫øu th∆∞·ªùng c√≥ 8 s·∫£n ph·∫©m ‚Üí hi·ªÉn th·ªã 8 skeleton

### **2. Loading State Management**
```jsx
// ‚úÖ GOOD: Set loading trong c·∫£ then v√† catch
getProducts(query)
  .then((res) => {
    setData(res.contents);
    setIsLoading(false);
  })
  .catch((err) => {
    console.error(err);
    setIsLoading(false); // Quan tr·ªçng!
  });

// ‚ùå BAD: Qu√™n set loading trong catch
getProducts(query)
  .then((res) => {
    setData(res.contents);
    setIsLoading(false);
  })
  .catch((err) => {
    console.error(err);
    // Skeleton s·∫Ω hi·ªÉn th·ªã m√£i m√£i!
  });
```

### **3. Props Matching**
ƒê·∫£m b·∫£o skeleton props kh·ªõp v·ªõi ProductItem:
```jsx
// N·∫øu ProductItem c√≥ isHomePage={false}
<ProductItemSkeleton isHomePage={false} />

// N·∫øu ProductItem ·ªü grid view
<ProductItemSkeleton isShowGrid={true} />
```

### **4. Key Props**
Lu√¥n th√™m `key` khi map skeleton:
```jsx
{Array.from({ length: 8 }).map((_, index) => (
  <ProductItemSkeleton key={index} {...props} />
))}
```

---

## üìä T√≥m T·∫Øt C√°c Trang ƒê√£ T√≠ch H·ª£p

| Trang/Component | Skeleton Count | isShowGrid | isHomePage | Ghi ch√∫ |
|-----------------|----------------|------------|------------|---------|
| HeadingListProduct | 2 | `true` | `true` | Homepage, 2 s·∫£n ph·∫©m n·ªïi b·∫≠t |
| PopularProduct | 8 | `true` | `true` | Homepage, s·∫£n ph·∫©m ph·ªï bi·∫øn |
| ListProducts (Shop) | Dynamic (8/12) | Dynamic | `false` | Shop page, h·ªó tr·ª£ grid/list |

---

## üé® T√πy Ch·ªânh Skeleton

N·∫øu c·∫ßn t√πy ch·ªânh skeleton cho component ƒë·∫∑c bi·ªát:

### **Option 1: T·∫°o Wrapper Component**
```jsx
function MyCustomSkeleton() {
  return (
    <div className="my-custom-wrapper">
      <ProductItemSkeleton isShowGrid={true} isHomePage={true} />
    </div>
  );
}
```

### **Option 2: T·∫°o Skeleton M·ªõi**
Tham kh·∫£o c·∫•u tr√∫c c·ªßa [ProductItemSkeleton](file:///d:/Work/Project_Web/E-commerse-reactjs/ecommerse/src/components/skeletons/ProductItemSkeleton/ProductItemSkeleton.jsx#5-63) v√† t·∫°o skeleton m·ªõi trong `src/components/skeletons/`:
```
src/components/skeletons/
‚îú‚îÄ‚îÄ ProductItemSkeleton/
‚îú‚îÄ‚îÄ BlogItemSkeleton/      ‚Üê M·ªõi
‚îî‚îÄ‚îÄ CategorySkeleton/       ‚Üê M·ªõi
```

---

## ‚ú® K·∫øt Lu·∫≠n

Skeleton loader gi·ªù ƒë√£:
- ‚úÖ **Reusable**: D√πng ƒë∆∞·ª£c ·ªü nhi·ªÅu trang
- ‚úÖ **Flexible**: H·ªó tr·ª£ grid/list, homepage/shop
- ‚úÖ **Easy to integrate**: Ch·ªâ c·∫ßn 3 b∆∞·ªõc ƒë∆°n gi·∫£n
- ‚úÖ **Consistent**: Gi·ªëng h·ªát ProductItem th·∫≠t
- ‚úÖ **Proven**: ƒê√£ test tr√™n Homepage v√† Shop page

**B·∫°n c√≥ th·ªÉ t√≠ch h·ª£p skeleton v√†o b·∫•t k·ª≥ component n√†o ch·ªâ trong v√†i ph√∫t!** üöÄ
